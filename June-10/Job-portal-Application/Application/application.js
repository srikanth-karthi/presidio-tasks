const data = [
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },
    {
      companyName: "Nomad",
      roles: "Social Media Assistant",
      dateApplied: "24 July 2021",
      status: "Rejected",
    },
    {
      companyName: "Udacity",
      roles: "Social Media Assistant",
      dateApplied: "20 July 2021",
      status: "Interviewed",
    },
    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    },

    {
      companyName: "Packer",
      roles: "Social Media Assistant",
      dateApplied: "16 July 2021",
      status: "Hired",
    },
    {
      companyName: "Divvy",
      roles: "Social Media Assistant",
      dateApplied: "14 July 2021",
      status: "Applied",
    }
     
  ];



  // Handle sidebar and logo toggle
document.getElementById('cross').style.display = 'none';

document.getElementById('menuButton').addEventListener('click', function() {
    document.getElementById('sidebar').classList.toggle('hidden');
    document.getElementById('company-logo').style.display = 'none';
    document.getElementById('cross').style.display = 'block';
    document.querySelector('.main-content').classList.toggle('expanded');
});

document.getElementById('cross').addEventListener('click', function() {
    const sidebar = document.getElementById('sidebar');
    const companyLogo = document.getElementById('company-logo');
    const crossButton = document.getElementById('cross');
    const mainContent = document.querySelector('.main-content');

    sidebar.classList.toggle('hidden');
    mainContent.classList.toggle('expanded');

    if (companyLogo.style.display === 'none' || companyLogo.style.display === '') {
        companyLogo.style.display = 'block';
        crossButton.style.display = 'none';
    } else {
        companyLogo.style.display = 'none';
        crossButton.style.display = 'block';
    }
});


const itemsPerPage = 5;
let currentPage = 1;
const totalItems = data.length;
const totalPages = Math.ceil(totalItems / itemsPerPage);

function renderTable(page) {
    const tableBody = document.getElementById("applicationsTable");
    tableBody.innerHTML = "";

    const startIndex = (page - 1) * itemsPerPage;
    const endIndex = Math.min(startIndex + itemsPerPage, totalItems);
    for (let i = startIndex; i < endIndex; i++) {
      const row = data[i];
      const tr = document.createElement("tr");
      tr.innerHTML = `
          <td>${i + 1}</td>
          <td>
              <img src="../assets/dropbox.svg" alt="${row.companyName} logo" style="width:50px; height:auto; vertical-align:middle; margin-right:10px;">
              ${row.companyName}
          </td>
          <td>${row.roles}</td>
          <td>${row.dateApplied}</td>
          <td class="status-td"><span class="${getStatusClass(row.status)} data-center">${row.status}</span></td>
      `;
      tableBody.appendChild(tr);
  }
  
}

function getStatusClass(status) {
    switch (status) {
        case "Applied":
            return "status Applied";
        case "Hired":
            return "status Hired";
        case "Interviewed":
            return "status Interviewed";
        case "Rejected":
            return "status Rejected";
        default:
            return "status";
    }
}

function renderPagination() {
    const pagination = document.getElementById("pagination");
    pagination.innerHTML = "";

    const createButton = (text, isActive = false, isDisabled = false) => {
        const button = document.createElement("button");
        button.textContent = text;
        if (isActive) {
            button.classList.add("active");
        }
        if (isDisabled) {
            button.disabled = true;
        }
        button.addEventListener("click", function() {
            if (!isDisabled) {
                currentPage = parseInt(text) || currentPage + (text === '>' ? 1 : -1);
                renderTable(currentPage);
                renderPagination();
            }
        });
        return button;
    };

    // Previous button
    pagination.appendChild(createButton("<", false, currentPage === 1));

    // Page buttons
    if (totalPages <= 7) {
        for (let i = 1; i <= totalPages; i++) {
            pagination.appendChild(createButton(i, i === currentPage));
        }
    } else {
        pagination.appendChild(createButton(1, 1 === currentPage));
        if (currentPage > 4) pagination.appendChild(createButton("..."));

        const startPage = Math.max(2, currentPage - 2);
        const endPage = Math.min(totalPages - 1, currentPage + 2);

        for (let i = startPage; i <= endPage; i++) {
            pagination.appendChild(createButton(i, i === currentPage));
        }

        if (currentPage < totalPages - 3) pagination.appendChild(createButton("..."));
        pagination.appendChild(createButton(totalPages, currentPage === totalPages));
    }

    // Next button
    pagination.appendChild(createButton(">", false, currentPage === totalPages));
}

function updateCategoryCounts() {
    const allCount = data.length;
    const AppliedCount = data.filter((item) => item.status === "Applied").length;
    const InterviewedCount = data.filter((item) => item.status === "Interviewed").length;
    const HiredCount = data.filter((item) => item.status === "Hired").length;
    const RejectedCount = data.filter((item) => item.status === "Rejected").length;


    document.getElementById("allCount").textContent = allCount;
    document.getElementById("AppliedCount").textContent = AppliedCount;
    document.getElementById("InterviewedCount").textContent = InterviewedCount;
    document.getElementById("HiredCount").textContent = HiredCount;
    document.getElementById("RejectedCount").textContent = RejectedCount;
}

updateCategoryCounts();
renderTable(currentPage);
renderPagination();


  const tabs = document.querySelectorAll('.tab-item');

  tabs.forEach(tab => {
      tab.addEventListener('click', function(event) {
          event.preventDefault();

          tabs.forEach(item => item.classList.remove('active'));


          this.classList.add('active');
      });
  });

